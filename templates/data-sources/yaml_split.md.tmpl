---
page_title: "{{.Type}} {{.Name}} - {{.ProviderName}}"
subcategory: ""
description: |-
{{ .Description | plainmarkdown | trimspace | prefixlines "  " }}
---

# {{.Type}}: {{.Name}}

{{ .Description | trimspace }}

## Example Usage - Inline Content

<!-- runnable-test: yaml-split-inline -->
```terraform
data "k8sconnect_yaml_split" "resources" {
  content = <<-YAML
    apiVersion: v1
    kind: Namespace
    metadata:
      name: example
    ---
    apiVersion: v1
    kind: ConfigMap
    metadata:
      name: app-config
      namespace: example
    data:
      key: value
    ---
    apiVersion: v1
    kind: Secret
    metadata:
      name: app-secret
      namespace: example
    type: Opaque
    data:
      password: cGFzc3dvcmQ=
  YAML
}

resource "k8sconnect_object" "resources" {
  for_each = data.k8sconnect_yaml_split.resources.manifests

  yaml_body          = each.value
  cluster = local.cluster
}
```
<!-- /runnable-test -->

## Example Usage - File Pattern

```terraform
# Load all YAML files from a directory
data "k8sconnect_yaml_split" "all_manifests" {
  pattern = "${path.module}/manifests/*.yaml"
}

resource "k8sconnect_object" "all" {
  for_each = data.k8sconnect_yaml_split.all_manifests.manifests

  yaml_body          = each.value
  cluster = local.cluster
}
```

## Example Usage - Kustomize

```terraform
# Build kustomization and deploy all resources
data "k8sconnect_yaml_split" "app" {
  kustomize_path = "${path.module}/kustomize/overlays/production"
}

resource "k8sconnect_object" "app" {
  for_each = data.k8sconnect_yaml_split.app.manifests

  yaml_body = each.value
  cluster   = local.cluster
}
```

The `kustomize_path` option runs `kustomize build` on the specified directory, combining bases and overlays into final manifests.

See the [kustomize-basic](https://github.com/jmorris0x0/terraform-provider-k8sconnect/tree/main/examples/kustomize-basic) example for a complete working setup with base + overlay structure.

## Manifest IDs

The datasource generates stable IDs in the format:
- **Cluster-scoped**: `kind.name` (e.g., `namespace.production`, `clusterrole.admin`)
- **Namespaced**: `kind.namespace.name` (e.g., `deployment.default.nginx`, `service.app.api`)

This prevents resource recreation when manifests are reordered in the YAML file.

{{ .SchemaMarkdown | trimspace }}
